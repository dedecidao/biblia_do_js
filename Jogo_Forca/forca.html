<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Forca</title>
</head>
<body>
    <div id="menu">
        <button onclick="inicia()">Iniciar</button>
    </div>
    <div id="palavra"> 
        <input type="text" maxlength="1" id="letra0" class="letra">
        <input type="text" maxlength="1" id="letra1" class="letra">
        <input type="text" maxlength="1" id="letra2" class="letra">
        <input type="text" maxlength="1" id="letra3" class="letra">
        <input type="text" maxlength="1" id="letra4" class="letra">
        <input type="text" maxlength="1" id="letra5" class="letra">
        <input type="text" maxlength="1" id="letra6" class="letra">
        <input type="text" maxlength="1" id="letra7" class="letra">
        <input type="text" maxlength="1" id="letra8" class="letra">
        <input type="text" maxlength="1" id="letra9" class="letra">
        <input type="text" maxlength="1" id="letra10" class="letra">
        <input type="text" maxlength="1" id="letra11" class="letra">
        <input type="text" maxlength="1" id="letra12" class="letra">
        <input type="text" maxlength="1" id="letra13" class="letra">
        <input type="text" maxlength="1" id="letra14" class="letra">
        <input type="text" maxlength="1" id="letra15" class="letra">
        <input type="text" maxlength="1" id="letra16" class="letra">
        <input type="text" maxlength="1" id="letra17" class="letra">
        <input type="text" maxlength="1" id="letra18" class="letra">
        <input type="text" maxlength="1" id="letra19" class="letra">
    </div>
    <div id="jogador">
        <p>Tente uma letra:</p>
        <input type="text" maxlength="1" id="letraJogador">
        <button onclick=jogar() type="submit">Enviar</button>
        <button>Pedir Dica</button>
        <div id="dvMsg"></div>
        <br/>
        <div id="letrasDigitadas"></div>
    </div>
    <div id="forca">
        <img src="img/cabeca1.png" alt="" id="cabeca">
        <img src="img/corpo.png" alt="" id="corpo">
        <img src="img/bracoE.png" alt="" id="bracoE">
        <img src="img/bracoD.png" alt="" id="bracoD">
        <img src="img/pernaE.png" alt="" id="pernaE">
        <img src="img/pernaD.png" alt="" id="pernaD">
    </div>
<script>
// Lib de Palavras Posiiveis:
const biblioteca = [
    'javascript',
    'curso',
    'computador',
    'churrasco',
    'controle',
    'chinelo',
    'bateria',
    'guitarra',
    'monitor',
    'brasil',
    'helicoptero',
    'namorado',
    'casamento',
    'praia',
    'desodorante',
    'camiseta',
];

//Variaveis do jogo.

let jogando = false;
let jogada;
let acertos = 0;
let erros = 0;
let acertou = false;
let qtde = biblioteca.length;
let pos = Math.round(Math.random() * qtde);
let palavra = biblioteca[pos];
let tam = palavra.length;
let errosMax = 7;
let desenhos = [];


function inicia() {

    jogando = true;
    jogada = document.getElementById('letraJogador');
    jogada.value = null;
    jogada.focus();
    acertos = erros = 0;
    acertou = false;
    document.getElementById('letrasDigitadas').innerHTML = 'Letras Digitadas: ';
    qtde = biblioteca.length;
    pos = Math.round(Math.random() * qtde);
    palavra = biblioteca[pos];
    tam = palavra.length;
    defineLetras(tam);
    document.getElementById('dvMsg').innerHTML = '';
    desenhos[1] = document.getElementById('cabeca');
    desenhos[2] = document.getElementById('corpo');
    desenhos[3] = document.getElementById('bracoE');
    desenhos[4] = document.getElementById('bracoD');
    desenhos[5] = document.getElementById('pernaE');
    desenhos[6] = document.getElementById('pernaD');

    document.getElementById('cabeca').src= 'img/cabeca1.png';

    for (let index = 1; index < 7; index++) {
        desenhos[index].style.display = 'none';        
    }
    console.log(palavra);
}

function defineLetras (tam) {

    for(let i = 0 ; i < 20; i++){
        document.getElementById('letra' + i).value = '';
        document.getElementById('letra' + i).style.display = 'none';
    }

    for (let i = 0 ; i < tam; i++) {
        obj = document.getElementById('letra' + i).style.display = 'inline-block';
    }
}

function jogar () {
    if (jogada.value === '') {
        alert("Digite uma letra!");
    }

    if (jogando) {
        
        let obj;
        let letraTmp;
        let letra;
        let pesq;

        letra = jogada.value;
        jogada.value = '';

        acertou = false;

        pesq = palavra.match(letra);
        // console.log(letra);
        // console.log(pesq);

        while(pesq != null) {
            letraTmp = palavra.search(letra); //Retorna a posicao q a letra esta
            console.log(letraTmp);
            obj = document.getElementById('letra' + letraTmp).value = letra;
            palavra = palavra.replace(letra, '0');
            acertos++;
            pesq = palavra.match(letra);
            acertou = true;
            
        }

        if (!acertou) { //Se errou
            document.getElementById('letrasDigitadas').innerHTML += letra.toUpperCase() + ' ';
            erros ++;

            if (erros < 7) {
                desenhos[erros].style.display = 'block';
            } else {
                document.getElementById('cabeca').src= 'img/cabeca2.png';
                document.getElementById('dvMsg').innerHTML = 'PERDEU!'
                jogando = false;
            }
        }

        if(acertos === tam) {
            document.getElementById('dvMsg').innerHTML = "GANHOU!";
            jogando = false;
        }


    }
}
</script>
</body>
</html>